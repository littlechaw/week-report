<!DOCTYPE html>
<html lang="en" ng-app="mainApp">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Index - 周报</title>
    <link type="favicon" rel="shortcut icon" href="img/favicon.ico"/>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/index.css"/>
    <link rel="stylesheet" href="css/writeReport.css"/>

</head>
<body>
<div class="container">
    <h2>来自渣哥的问候</h2>
    <ul>
        <li><a href="#/write">写周报</a></li>
        <li><a href="#/record">周报记录</a></li>
    </ul>

    <div ng-view></div>

</div>


<script type="text/javascript" src="js/jquery-2-1-3-min.js"></script>
<script type="text/javascript" src="js/md5.js"></script>
<script type="text/javascript" src="js/angular.min.js"></script>
<script type="text/javascript" src="js/angular-route.min.js"></script>
<script>
    var mainApp = angular.module('mainApp', ['ngRoute'])
        .config(["$locationProvider", "$routeProvider", function ($locationProvider, $routeProvider) {
            $locationProvider.hashPrefix('');
            $routeProvider.when('/write', {
                templateUrl: 'writeReport.html',
                controller: 'writeCtrl'
            }).when('/record', {
                templateUrl: 'record.html',
                controller: 'recordCtrl'
            }).otherwise({
                redirectTo: '/write'
            });
        }]);
    mainApp.controller("writeCtrl", function ($scope, $http) {
        $scope.$on('$viewContentLoaded', function () {
            $scope.formData = {};
            $http({
                url: "get/getDwr",
                method: "POST",
            }).then(function onSuccess(response) {
                console.info(response);
                if (response.data) {
                    $scope.formData.doneObj = response.data;
                } else {
                    alert("去打叫兽");
                }
            }).catch(function onError(response) {
                if (response.status == 500) {
                    alert("打死叫兽");
                }
                console.error(response);
            });
        });
        $scope.addThis = function () {
            var data = {
                // content: $scope.,
                // planTime: $scope.,
                // percent: $scope.,
                // doneTime: $scope.,
                // remark: $scope.
            };
            $http({
                url: "write/insertThis",
                method: "POST",
                data: data
            }).then(function onSuccess(response) {
                if (response.data) {

                } else {
                    alert("网络不太好，去打叫兽");
                }
            }).catch(function onError(response) {
                if (response.status == 500) {
                    alert("打死叫兽");
                }
                console.error(response);
            });
        };
        $scope.addExtra = function () {

        };
        $scope.addNext = function () {

        };
    });
    mainApp.controller("recordCtrl", function ($scope) {

    });
</script>
</body>
</html>